# PyImport2Pkg：Python Import 语句到 Pip 包名逆向映射工具

## 开发指导文档

---

## 一、项目背景与动机

### 1.1 问题陈述

**传统开发流程**：
```
纯净环境 → 按需安装包 → 编写代码 → pip freeze 导出依赖
```

**AI 辅助编码时代的新流程**：
```
AI 生成代码 → 开发者 Review → 从 import 语句反推需要的包 → 安装 → 运行
```

**核心痛点**：当 AI 生成包含大量 import 的代码时，开发者需要手动查找每个模块对应的 pip 包名。这个过程：
- 耗时（需要逐个 Google 搜索）
- 不可靠（依赖社区口口相传）
- 存在安全风险（可能安装到恶意同名包）

### 1.2 现有方案的局限性

**pipreqs** 的问题：
- 映射文件仅约 1127 行，覆盖率极低
- 主要靠"猜测"推断映射关系
- 维护不及时，缺失大量流行包
- 存在依赖混淆攻击风险

### 1.3 项目目标

构建一个**安全、准确、完备**的工具，实现：
1. 解析 Python 代码中的所有 import 语句
2. 建立完善的「模块名 → pip 包名」逆向映射
3. 处理各种边缘情况，提供清晰的用户提示

---

## 二、系统架构设计

### 2.1 整体架构

```
┌─────────────────────────────────────────────────────────────────────┐
│                          PyImport2Pkg                                │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌──────────────┐    ┌──────────────┐    ┌──────────────────────┐   │
│  │   输入层     │───▶│   解析层     │───▶│      过滤层          │   │
│  │              │    │              │    │                      │   │
│  │ - 单文件     │    │ - AST 解析   │    │ - 标准库过滤         │   │
│  │ - 项目目录   │    │ - 动态导入   │    │ - 本地导入过滤       │   │
│  │ - 代码片段   │    │   检测       │    │ - 相对导入过滤       │   │
│  └──────────────┘    └──────────────┘    └──────────────────────┘   │
│                                                    │                 │
│                                                    ▼                 │
│  ┌──────────────┐    ┌──────────────┐    ┌──────────────────────┐   │
│  │   输出层     │◀───│   决策层     │◀───│      映射层          │   │
│  │              │    │              │    │                      │   │
│  │ - requirements│   │ - 冲突解决   │    │ - 硬编码映射表       │   │
│  │ - JSON       │    │ - 用户交互   │    │ - top_level.txt DB   │   │
│  │ - 终端输出   │    │ - 推荐排序   │    │ - 命名空间包处理     │   │
│  └──────────────┘    └──────────────┘    └──────────────────────┘   │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 核心模块划分

| 模块 | 职责 | 输入 | 输出 |
|------|------|------|------|
| **Scanner** | 扫描项目文件，排除无关目录 | 项目路径 | Python 文件列表 |
| **Parser** | 解析 import 语句，提取模块信息 | Python 源码 | ImportInfo 列表 |
| **Filter** | 过滤标准库、本地导入等 | ImportInfo 列表 | 外部模块列表 |
| **Mapper** | 模块名到包名的映射查询 | 模块名 | 包名候选列表 |
| **Resolver** | 处理冲突、用户交互、最终决策 | 包名候选 | 最终包名 |
| **Exporter** | 生成 requirements.txt 等输出 | 最终包名列表 | 文件/终端输出 |

---

## 三、详细设计

### 3.1 Scanner 模块：项目扫描器

#### 3.1.1 功能描述
递归扫描项目目录，收集所有需要分析的 Python 文件。

#### 3.1.2 排除规则（默认）

```python
DEFAULT_EXCLUDE_DIRS = {
    '.venv', 'venv', 'env',           # 虚拟环境
    '.git', '.svn', '.hg',            # 版本控制
    '__pycache__', '.pytest_cache',   # 缓存目录
    'node_modules',                    # 前端依赖
    'build', 'dist', '*.egg-info',    # 构建产物
    '.tox', '.nox',                   # 测试环境
    'site-packages',                   # 已安装包
}

DEFAULT_EXCLUDE_FILES = {
    'setup.py',      # 可选：setup.py 中的依赖通常是声明性的
    'conftest.py',   # 可选：pytest 配置
}
```

#### 3.1.3 配置项
- `--include-hidden`: 是否包含隐藏目录
- `--exclude`: 额外排除的目录/文件模式
- `--include`: 强制包含的目录/文件

---

### 3.2 Parser 模块：Import 语句解析器

#### 3.2.1 Import 语句分类与处理策略

| 类型 | 示例 | 解析方法 | 处理策略 |
|------|------|----------|----------|
| **标准 import** | `import numpy` | AST `Import` 节点 | 直接提取 |
| **from import** | `from pandas import DataFrame` | AST `ImportFrom` 节点 | 提取 module 字段 |
| **多级导入** | `import google.cloud.storage` | AST 解析 | 提取完整路径 |
| **相对导入** | `from . import utils` | AST `level > 0` | **忽略** |
| **动态导入** | `importlib.import_module('x')` | AST `Call` 节点 | **警告 + 尝试解析** |
| **条件导入** | `if xxx: import yyy` | 检查父节点类型 | 标记为 `optional` |
| **try-except 导入** | `try: import ujson` | 检查父节点类型 | 标记为 `optional` |
| **函数内导入** | 在函数体内的 import | 检查作用域 | **警告** |

#### 3.2.2 ImportInfo 数据结构

```python
@dataclass
class ImportInfo:
    """单个 import 语句的完整信息"""

    # 基本信息
    module_name: str           # 完整模块路径，如 "google.cloud.storage"
    top_level: str             # 顶级模块名，如 "google"
    sub_modules: list[str]     # 子模块路径，如 ["cloud", "storage"]

    # 来源信息
    file_path: str             # 所在文件
    line_number: int           # 行号
    import_statement: str      # 原始语句

    # 分类标签
    import_type: ImportType    # STANDARD | FROM | DYNAMIC
    context: ImportContext     # TOP_LEVEL | CONDITIONAL | TRY_EXCEPT | FUNCTION

    # 标记
    is_optional: bool = False  # 是否可选（条件导入、try-except）
    is_dynamic: bool = False   # 是否为动态导入
    warnings: list[str] = None # 相关警告信息
```

#### 3.2.3 动态导入检测

```python
# 需要检测的动态导入模式
DYNAMIC_IMPORT_PATTERNS = [
    'importlib.import_module',
    '__import__',
    'importlib.util.find_spec',
    'importlib.util.module_from_spec',
]

# 处理策略
def handle_dynamic_import(call_node: ast.Call) -> ImportInfo | None:
    """
    尝试解析动态导入：
    1. 如果参数是字符串字面量，直接提取
    2. 如果是变量/表达式，标记警告并返回 None
    """
    if isinstance(call_node.args[0], ast.Constant):
        return ImportInfo(
            module_name=call_node.args[0].value,
            is_dynamic=True,
            warnings=["检测到动态导入，请确认此包确实需要"]
        )
    else:
        # 无法静态分析
        return None  # 同时记录警告供用户查看
```

---

### 3.3 Filter 模块：过滤器

#### 3.3.1 过滤优先级（从高到低）

```
1. 相对导入          → 直接丢弃（本地模块）
2. 标准库模块        → 丢弃（根据目标 Python 版本判断）
3. 本地项目模块      → 丢弃（存在于项目目录中的模块）
4. 硬编码排除列表    → 丢弃（已知的特殊情况）
```

#### 3.3.2 标准库判断

**核心原则**：根据用户指定的**目标 Python 版本**判断

```python
import sys
from stdlib_list import stdlib_list  # 或自行维护

class StdlibFilter:
    def __init__(self, target_version: str = None):
        """
        target_version: 如 "3.8", "3.11", "2.7"
        如果未指定，使用当前运行环境的版本
        """
        self.version = target_version or f"{sys.version_info.major}.{sys.version_info.minor}"
        self.stdlib_modules = set(stdlib_list(self.version))

    def is_stdlib(self, module_name: str) -> bool:
        top_level = module_name.split('.')[0]
        return top_level in self.stdlib_modules
```

**Backports 处理**：

| 模块 | Python 版本 | 处理方式 |
|------|-------------|----------|
| `typing` | < 3.5 | 需要安装 `typing` 包 |
| `enum` | < 3.4 | 需要安装 `enum34` 包 |
| `dataclasses` | < 3.7 | 需要安装 `dataclasses` 包 |
| `asyncio` | < 3.4 | 需要安装 `asyncio` 包 |

```python
BACKPORTS_MAP = {
    'typing': {'min_version': (3, 5), 'package': 'typing'},
    'enum': {'min_version': (3, 4), 'package': 'enum34'},
    'dataclasses': {'min_version': (3, 7), 'package': 'dataclasses'},
    # ...
}
```

#### 3.3.3 本地模块判断

```python
def is_local_module(module_name: str, project_root: Path) -> bool:
    """
    判断是否为项目内的本地模块

    策略：
    1. 检查项目根目录下是否存在同名目录/文件
    2. 检查是否在项目的 src/ 目录下
    3. 检查 pyproject.toml / setup.py 中声明的包名
    """
    top_level = module_name.split('.')[0]

    # 检查是否存在对应的目录或文件
    if (project_root / top_level).is_dir():
        return True
    if (project_root / f"{top_level}.py").is_file():
        return True
    if (project_root / "src" / top_level).is_dir():
        return True

    return False
```

---

### 3.4 Mapper 模块：逆向映射核心

#### 3.4.1 映射数据源（优先级从高到低）

```
┌─────────────────────────────────────────────────────────────────┐
│                        映射查询优先级                            │
├─────────────────────────────────────────────────────────────────┤
│  1. 硬编码映射表（最高优先级，处理特殊情况）                      │
│     ├── 经典不匹配案例（cv2→opencv-python, PIL→Pillow）         │
│     ├── .pth 注入模块（win32api→pywin32）                       │
│     └── 已知的命名空间包映射                                     │
├─────────────────────────────────────────────────────────────────┤
│  2. 命名空间包专用映射表                                         │
│     └── google.cloud.* → google-cloud-* 等                      │
├─────────────────────────────────────────────────────────────────┤
│  3. top_level.txt 数据库（主映射源）                             │
│     └── 从 PyPI 包的 wheel 文件中提取                           │
├─────────────────────────────────────────────────────────────────┤
│  4. 推测映射（最低优先级，需标记警告）                           │
│     └── 模块名与包名相同的情况                                   │
└─────────────────────────────────────────────────────────────────┘
```

#### 3.4.2 硬编码映射表设计

```python
# === 经典不匹配案例 ===
CLASSIC_MISMATCHES = {
    'cv2': ['opencv-python', 'opencv-contrib-python', 'opencv-python-headless'],
    'PIL': ['Pillow'],  # PIL 原始包已废弃
    'sklearn': ['scikit-learn'],
    'yaml': ['PyYAML'],
    'bs4': ['beautifulsoup4'],
    'Crypto': ['pycryptodome'],
    'Cryptodome': ['pycryptodomex'],
    'dateutil': ['python-dateutil'],
    'dotenv': ['python-dotenv'],
    'jwt': ['PyJWT'],
    'serial': ['pyserial'],
    'usb': ['pyusb'],
    'skimage': ['scikit-image'],
    'cv': ['opencv-python'],  # 旧版 OpenCV
    'wx': ['wxPython'],
    'gi': ['PyGObject'],
    # ... 持续维护
}

# === .pth 注入模块（PyWin32 等）===
PTH_INJECTED_MODULES = {
    'win32api': 'pywin32',
    'win32gui': 'pywin32',
    'win32con': 'pywin32',
    'win32clipboard': 'pywin32',
    'win32com': 'pywin32',
    'pythoncom': 'pywin32',
    'pywintypes': 'pywin32',
    'win32event': 'pywin32',
    'win32file': 'pywin32',
    'win32pipe': 'pywin32',
    'win32process': 'pywin32',
    'win32security': 'pywin32',
    'win32service': 'pywin32',
    'servicemanager': 'pywin32',
    # ... 完整列表
}

# === 源码包 vs 二进制包 ===
# 推荐优先使用 binary 版本
BINARY_PREFERENCE = {
    'psycopg2': {
        'source': 'psycopg2',
        'binary': 'psycopg2-binary',
        'recommend': 'binary',
        'note': '开发环境推荐 binary，生产环境推荐 source'
    },
    # ...
}
```

#### 3.4.3 命名空间包处理

**问题**：`google`, `azure`, `zope` 等顶级模块对应数百个不同的包

**解决方案**：建立「顶级模块 + 第一子模块」到包名的映射

```python
NAMESPACE_PACKAGES = {
    'google': {
        'cloud': {
            'storage': 'google-cloud-storage',
            'bigquery': 'google-cloud-bigquery',
            'pubsub': 'google-cloud-pubsub',
            'firestore': 'google-cloud-firestore',
            # ... 完整映射
        },
        'auth': 'google-auth',
        'api_core': 'google-api-core',
        'protobuf': 'protobuf',
        'ads': 'google-ads',
    },
    'azure': {
        'storage': {
            'blob': 'azure-storage-blob',
            'queue': 'azure-storage-queue',
            'file': 'azure-storage-file-share',
        },
        'identity': 'azure-identity',
        'keyvault': {
            'secrets': 'azure-keyvault-secrets',
            'keys': 'azure-keyvault-keys',
        },
        # ...
    },
    'zope': {
        'interface': 'zope.interface',
        'component': 'zope.component',
        # ...
    },
    # ...
}

def resolve_namespace_package(import_info: ImportInfo) -> list[str]:
    """解析命名空间包"""
    top = import_info.top_level
    subs = import_info.sub_modules

    if top not in NAMESPACE_PACKAGES:
        return []

    current = NAMESPACE_PACKAGES[top]
    for sub in subs:
        if isinstance(current, dict) and sub in current:
            current = current[sub]
        else:
            break

    if isinstance(current, str):
        return [current]
    elif isinstance(current, dict):
        # 无法确定具体包，返回所有可能
        return list(flatten_dict_values(current))
    return []
```

#### 3.4.4 top_level.txt 数据库构建

**数据来源**：PyPI 包的 wheel 文件中的 `top_level.txt`

**构建流程**：

```
1. 获取 PyPI 热门包列表（按下载量排序）
   └── 数据源：https://hugovk.github.io/top-pypi-packages/

2. 下载每个包的 wheel 文件（仅元数据）
   └── 使用 pip download --no-deps --only-binary :all:

3. 解压提取 *.dist-info/top_level.txt
   └── 每行一个顶级模块名

4. 构建逆向映射
   └── {module_name: [package_name1, package_name2, ...]}

5. 持久化存储
   └── SQLite / JSON / 专用格式
```

**数据结构**：

```python
# 数据库 Schema
"""
CREATE TABLE module_to_package (
    module_name TEXT NOT NULL,
    package_name TEXT NOT NULL,
    package_version TEXT,
    download_count INTEGER,  -- 用于排序推荐
    last_updated TIMESTAMP,
    PRIMARY KEY (module_name, package_name)
);

CREATE INDEX idx_module ON module_to_package(module_name);
CREATE INDEX idx_downloads ON module_to_package(download_count DESC);
"""
```

**更新策略**：
- 定期（每周/每月）更新数据库
- 提供在线更新命令：`pyimport2pkg update-db`
- 支持离线模式：使用本地缓存的数据库

---

### 3.5 Resolver 模块：决策与冲突解决

#### 3.5.1 一对多冲突处理

当一个模块名对应多个包时：

```python
class ConflictResolver:
    def resolve(self, module_name: str, candidates: list[str],
                mode: str = 'interactive') -> str | list[str]:
        """
        mode:
        - 'interactive': 交互式询问用户
        - 'popular': 自动选择最流行的
        - 'all': 返回所有候选
        """
        if len(candidates) == 1:
            return candidates[0]

        # 按下载量排序
        sorted_candidates = self.sort_by_popularity(candidates)

        if mode == 'popular':
            return sorted_candidates[0]
        elif mode == 'all':
            return sorted_candidates
        else:  # interactive
            return self.prompt_user(module_name, sorted_candidates)
```

**典型冲突案例处理**：

| 模块 | 候选包 | 默认推荐 | 推荐理由 |
|------|--------|----------|----------|
| `cv2` | opencv-python, opencv-contrib-python, opencv-python-headless | opencv-python | 最通用 |
| `PIL` | Pillow, PIL | Pillow | PIL 已废弃 |
| `tensorflow` | tensorflow, tensorflow-cpu, tensorflow-gpu, tensorflow-macos | 根据 OS 推荐 | 平台相关 |

#### 3.5.2 平台特定处理

```python
import platform

PLATFORM_SPECIFIC_PACKAGES = {
    'tensorflow': {
        'Darwin': {
            'arm64': 'tensorflow-macos',
            'x86_64': 'tensorflow',
        },
        'Linux': 'tensorflow',
        'Windows': 'tensorflow',
    },
    # ...
}

def get_platform_recommendation(module_name: str) -> str | None:
    if module_name not in PLATFORM_SPECIFIC_PACKAGES:
        return None

    system = platform.system()
    machine = platform.machine()

    spec = PLATFORM_SPECIFIC_PACKAGES[module_name]
    if isinstance(spec.get(system), dict):
        return spec[system].get(machine, spec[system].get('default'))
    return spec.get(system)
```

---

### 3.6 Exporter 模块：输出生成

#### 3.6.1 输出格式

**requirements.txt（默认）**：

```
# Auto-generated by PyImport2Pkg
# Generated at: 2024-01-15 10:30:00
# Target Python: 3.11

# === Required packages ===
numpy
pandas
requests

# === Optional packages (from conditional imports) ===
# ujson  # try-except fallback in app/utils.py:42
# redis  # conditional import in config.py:15

# === Packages with multiple candidates (please verify) ===
# cv2 -> Selected: opencv-python
#        Alternatives: opencv-contrib-python, opencv-python-headless

# === Warnings ===
# - Dynamic import detected in app/plugins.py:88, manual review required
# - google.cloud.* namespace detected, verify correct packages installed
```

**JSON 格式**：

```json
{
  "meta": {
    "generated_at": "2024-01-15T10:30:00Z",
    "target_python": "3.11",
    "tool_version": "1.0.0"
  },
  "required": [
    {"package": "numpy", "module": "numpy", "files": ["main.py:1"]},
    {"package": "pandas", "module": "pandas", "files": ["data.py:3", "analysis.py:1"]}
  ],
  "optional": [
    {"package": "ujson", "module": "ujson", "context": "try-except", "location": "app/utils.py:42"}
  ],
  "unresolved": [
    {"module": "my_custom_lib", "reason": "not found in PyPI"}
  ],
  "warnings": [
    {"type": "dynamic_import", "location": "app/plugins.py:88", "message": "..."}
  ]
}
```

---

## 四、特殊情况处理汇总

### 4.1 处理策略速查表

| 情况 | 检测方法 | 处理策略 | 用户提示 |
|------|----------|----------|----------|
| **相对导入** | `ast.ImportFrom.level > 0` | 忽略 | 无 |
| **标准库** | stdlib_list 比对 | 忽略 | 无 |
| **本地模块** | 项目目录检查 | 忽略 | 无 |
| **动态导入** | 检测 `importlib.import_module` 调用 | 尝试解析字符串参数，否则警告 | 提示手动确认 |
| **条件导入** | 父节点为 `If` | 标记为 optional | 在注释中说明 |
| **try-except 导入** | 父节点为 `Try` | 标记为 optional | 在注释中说明 |
| **函数内导入** | 父节点为 `FunctionDef` | 正常处理 | 提示可能延迟加载 |
| **命名空间包** | 检查已知命名空间前缀 | 使用专用映射表 | 提示验证 |
| **一对多冲突** | 映射表返回多个候选 | 按热度推荐/用户选择 | 列出所有选项 |
| **.pth 注入** | 硬编码检查 | 使用专用映射表 | 无 |
| **Backports** | 版本号比对 | 根据目标版本决定 | 无 |
| **平台特定** | `platform.system()` | 根据当前/目标平台推荐 | 提示平台相关 |
| **sys.path 修改** | 检测 `sys.path.append` | 警告 | 提示手动处理 |
| **Vendored 依赖** | 无特殊处理需要 | 正常解析顶级模块 | 无 |
| **隐式依赖** | **无法静态检测** | 默认不处理 | 文档说明 |
| **版本不兼容** | **无法静态检测** | 默认最新版 | 文档说明 |

### 4.2 无法自动处理的情况

以下情况**超出静态分析能力**，需在文档中明确告知用户：

1. **隐式依赖**：如 `pandas.read_excel()` 需要 `openpyxl`
2. **运行时 API 变更**：旧代码依赖已废弃的 API
3. **动态路径修改**：`sys.path.append()` 后的导入
4. **非字面量动态导入**：`importlib.import_module(var)`
5. **extras_require**：如 `pip install pandas[excel]`

---

## 五、数据库构建与维护

### 5.1 初始数据库构建流程

```bash
# 1. 获取 PyPI Top 10000 包列表
curl -o top_packages.json \
  "https://hugovk.github.io/top-pypi-packages/top-pypi-packages-30-days.min.json"

# 2. 构建映射数据库（工具内部流程）
pyimport2pkg build-db --packages top_packages.json --output mapping.db

# 3. 合并硬编码映射
pyimport2pkg merge-hardcoded --db mapping.db --hardcoded hardcoded_mappings.json
```

### 5.2 数据库更新策略

```python
UPDATE_STRATEGIES = {
    'full': '完全重建，适用于大版本更新',
    'incremental': '增量更新，仅更新有变化的包',
    'hotfix': '紧急修复，仅更新硬编码映射表',
}
```

### 5.3 数据库分发

- **内嵌**：打包进 Python 包中（适合离线使用）
- **远程**：首次运行时下载（减小包体积）
- **混合**：内嵌基础映射 + 远程更新扩展映射

---

## 六、命令行接口设计

### 6.1 基本用法

```bash
# 分析单个文件
pyimport2pkg analyze main.py

# 分析整个项目
pyimport2pkg analyze ./my_project

# 生成 requirements.txt
pyimport2pkg analyze ./my_project -o requirements.txt

# 指定目标 Python 版本
pyimport2pkg analyze ./my_project --python-version 3.8

# JSON 输出
pyimport2pkg analyze ./my_project --format json

# 交互模式（遇到冲突时询问）
pyimport2pkg analyze ./my_project --interactive

# 自动选择最流行的包
pyimport2pkg analyze ./my_project --auto-resolve popular
```

### 6.2 高级选项

```bash
# 排除指定目录
pyimport2pkg analyze . --exclude tests,docs

# 仅分析指定目录
pyimport2pkg analyze . --include src

# 包含可选依赖
pyimport2pkg analyze . --include-optional

# 更新本地数据库
pyimport2pkg update-db

# 查询映射关系
pyimport2pkg query cv2
# Output: cv2 -> opencv-python (recommended), opencv-contrib-python, opencv-python-headless

# 检查数据库状态
pyimport2pkg db-info
```

---

## 七、安全考量

### 7.1 依赖混淆攻击防护

**风险**：恶意者在 PyPI 上注册与常见模块名相同的包

**防护措施**：
1. 优先使用**硬编码映射表**（人工验证过的映射）
2. 对于映射表外的包，显示**下载量和维护状态**
3. 对低下载量的包显示**警告**
4. 支持**白名单模式**：仅允许已知安全的包

### 7.2 数据源可信性

- 映射数据库使用**校验和**验证
- 远程更新使用 **HTTPS**
- 支持**离线模式**避免网络攻击

---

## 八、实现路线图

### Phase 1：核心功能（MVP）
- [ ] Scanner：项目文件扫描
- [ ] Parser：基本 import 语句解析（标准 import + from import）
- [ ] Filter：标准库过滤（使用 stdlib-list）
- [ ] Mapper：硬编码映射表实现
- [ ] Exporter：基本 requirements.txt 输出

### Phase 2：完善映射
- [ ] 构建 top_level.txt 数据库（Top 5000 包）
- [ ] 命名空间包支持
- [ ] .pth 注入模块支持
- [ ] 一对多冲突处理

### Phase 3：高级功能
- [ ] 动态导入检测
- [ ] 条件导入标记
- [ ] 平台特定推荐
- [ ] 交互式 CLI
- [ ] JSON 输出格式

### Phase 4：生态集成
- [ ] 数据库自动更新
- [ ] IDE 插件（VS Code）
- [ ] pre-commit hook
- [ ] CI/CD 集成

---

## 九、参考资源

### 9.1 可借鉴的项目
- [pipreqs](https://github.com/bndr/pipreqs) - import 解析逻辑
- [stdlib-list](https://github.com/jackmaney/python-stdlib-list) - 标准库列表
- [johnnydep](https://github.com/wimglenn/johnnydep) - 依赖分析
- [pip-tools](https://github.com/jazzband/pip-tools) - requirements 管理

### 9.2 数据源
- [PyPI Top Packages](https://hugovk.github.io/top-pypi-packages/) - 包热度排名
- [PyPI JSON API](https://pypi.org/pypi/<package>/json) - 包元数据
- [Python stdlib](https://docs.python.org/3/library/) - 标准库文档

---

## 十、附录

### A. 硬编码映射表完整版

见 `mappings/hardcoded.json`

### B. 命名空间包映射表

见 `mappings/namespace_packages.json`

### C. 标准库各版本列表

见 `mappings/stdlib_by_version/`

---

*文档版本：1.0.0*
*最后更新：2024-01*
