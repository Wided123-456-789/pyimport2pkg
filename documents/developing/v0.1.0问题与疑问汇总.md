V0.1.0问题与疑问汇总

1、**Scanner (\`scanner.py\`)**

自动排除 \`.venv\`, \`\__pycache_\_\`, \`.git\` 等：是否全面且常用，比如也许还有.vscode文件夹，.claude文件夹，这些是否已经在自动排除内，如果没有是否应当加上

2、**Parser (\`parser.py\`)**

目前，对于动态导入、条件导入（if 块内）、try-except 导入、函数内导入这些非标准情况的处理过程是怎么样的，在用户端反映出来的输出是如何的，举个例子，比如requirements文件会怎么样写，我需要看是否符合我的预期，是否合理，需不需要修改

3、**Filter (\`filter.py\`)**

标准库模块 → 丢弃（根据目标 Python 版本）：关于这一条，目标python版本目前代码里是如何确定的，是否应当需要用户手动输入预期的python版本

错误标记 → 丢弃：错误标记是什么意思，讲一下

**\*\*Backports 支持\*\***:

\- \`dataclasses\` (< 3.7)

\- \`typing\` (< 3.5)

\- \`tomllib\` (< 3.11)

\- \`zoneinfo\` (< 3.9)

：这部分是干啥的，也没看懂

4、**Mappings (\`mappings/\`)**

**\*\*hardcoded.py - 经典不匹配案例\*\***:

\`\`\`python

CLASSIC_MISMATCHES = {

&nbsp;   "cv2": \["opencv-python", "opencv-contrib-python", "opencv-python-headless"\],

&nbsp;   "PIL": \["Pillow"\],

&nbsp;   "sklearn": \["scikit-learn"\],

&nbsp;   "yaml": \["PyYAML"\],

&nbsp;   "bs4": \["beautifulsoup4"\],

&nbsp;   # ... 100+ 映射

}

PTH_INJECTED_MODULES = {

&nbsp;   "win32api": "pywin32",

&nbsp;   "pythoncom": "pywin32",

&nbsp;   # ... PyWin32 全部模块

}

\`\`\`

：这里的经典不匹配映射是否全，是否需要再搜集资料补充齐全

另外，pth注入相关的固定映射不会只加了pywin32一个吧，难道这种情况只有pywin32一个吗

还有命名空间包，也是是否齐全，是否还需要从哪里找资料补充齐全

5、**Mapper (\`mapper.py\`)**

**\*\*查询优先级\*\***:

1\. 命名空间包映射（如果有子模块）

2\. 硬编码映射表

3\. 命名空间包映射（顶级模块）

4\. 数据库查询

5\. 猜测（模块名 = 包名）

：这里的步骤对吗，为什么命名空间包要查两遍，难道是我理解错了？

6、**Database (\`database.py\`)**

这里每次构建和更新数据库是否有日志方便查看报错，错误后是否能分辨错误原因，比如5000个包，有100个获取错误，那是为什么错，方便开发者了解情况

7、**Resolver (\`resolver.py\`)**

这里也是，目前的代码是如何处理一对多的，我需要了解具体情况看看是否合理

8、**Exporter (\`exporter.py\`)**

告诉我不同情况对应的生成逻辑，比如一对多时requirements如何注释，但是可能这部分内容会和上面的疑问重复是吧

9、**CLI (\`cli.py\`)**

常用命令行有哪些

**10、依赖关系**

**还有没有没有考虑到但其实要用到的遗漏的依赖**

**11、已知问题和限制**

**“1. \*\*\`from xxx import yyy\` 的限制\*\***

&nbsp;  **- 对于 \`from google.cloud import storage\`，只能识别到 \`google.cloud\`**

&nbsp;  **- 因为 \`storage\` 可能是子模块也可能是类/函数，静态分析无法区分**

&nbsp;  **- 建议使用完整导入：\`import google.cloud.storage\`**

**”对于这个我的建议是由于这只会在命名空间包的情况下出现，那就尝试完整匹配，匹配不到了再匹配上一级（就是如果storage是函数，那google.cloud不就是模块名吗），不行最后再让用户手动匹配**